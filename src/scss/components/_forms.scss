@use '../abstracts/variables' as *;
@use '../abstracts/mixins' as *;

// ==================================================
// ======= Form and Inputs Styles ===================
// ===================================

// Base form elements
input[type="text"],
input[type="email"],
input[type="password"],
textarea {
	width: 100%;
	padding: $space-md;
	border: $border solid $form-input-border-color;
	border-radius: $radius-s;
	background: $form-input-bg-color;
	color: $form-input-text-color;
	font-size: $control-font-size;
	font-family: inherit;
	min-height: $control-height;
	transition: border-color $animation-fast $animation-ease;
	
	&:focus {
		outline: none;
		border-color: $form-input-border-color-focused;
		box-shadow: 0 0 0 3px rgba($accent-pink, 0.1);
	}
	
	&::placeholder {
		color: $control-text-color;
		opacity: 1;
	}
}

// Checkbox styling - square according to design
input[type="checkbox"] {
	accent-color: $checkbox-bg-color-checked;
	
	&:checked {
		background-color: $checkbox-bg-color-checked;
		border-color: $checkbox-bg-color-checked;
	}
}

// Disable browser autocomplete styling
input:-webkit-autofill,
input:-webkit-autofill:hover,
input:-webkit-autofill:focus,
input:-webkit-autofill:active {
	-webkit-box-shadow: 0 0 0 30px $pure-white inset;
	-webkit-text-fill-color: $text-color;
}

// Basic form groups
.form-group {
	position: relative;
	margin-bottom: $form-gap;
	
	label {
		display: block;
		font-size: $font-size-sm;
		font-weight: $font-weight-bold;
		color: $form-label-color;
		margin-bottom: $space-xs;
		text-align: left;
		
		.required-star {
			color: $form-label-required-color;
		}
	}
}

// Floating labels - direct classes without wrapper
.floating-input {
	width: 100%;
	padding: $space-md;
	border: $border solid $form-input-border-color;
	border-radius: $radius-s;
	background: $form-input-bg-color;
	color: $form-input-text-color;
	font-size: $control-font-size;
	font-family: inherit;
	min-height: $control-height;
	transition: border-color $animation-fast $animation-ease;
	
	&:focus {
		outline: none;
		border-color: $form-input-border-color-focused;
		box-shadow: 0 0 0 3px rgba($accent-pink, 0.1);
	}
	
	&::placeholder {
		color: transparent;
	}
}

.floating-label {
	position: absolute;
	left: $space-md;
	top: 30%;
	transform: translateY(-50%);
	background: transparent;
	padding: $floating-label-padding;
	color: $form-label-color;
	font-size: $font-size-sm;
	font-weight: $font-weight-normal;
	pointer-events: none;
	transition: all $animation-fast $animation-ease;
	z-index: 1;
	
	.required-star {
		color: $form-label-required-color;
	}
}

// Floating label active states
.floating-input:focus + .floating-label,
.floating-input:not(:placeholder-shown) + .floating-label {
	// top: 0;
	// transform:  scale($floating-label-scale);
	// color: $form-label-color-focused;
	opacity: 0;
	
	.required-star {
		color: $form-label-required-color;
	}
}



// Base dropdown container
// ========== Dropdown Base Placeholder ============
%dropdown-base {
	position: relative;
	display: inline-block;
	width: 100%;
	flex-shrink: 0;
}

.filter-dropdown {
	@extend %dropdown-base;
	
	// Show dropdown on hover
	&:hover .filter-options {
		opacity: 1;
		visibility: visible;
		transform: translateY(0);
	}
}

.sort-dropdown {
	@extend %dropdown-base;
	
	// Show dropdown on hover
	&:hover .sort-options {
		opacity: 1;
		visibility: visible;
		transform: translateY(0);
	}
}

// Dropdown buttons - inherit base control styles but with dropdown-specific border
.filter-btn,
.sort-btn {
	width: 100%;
	padding: $space-md;
	border: $border solid $dropdown-border-color; // Grey border instead of pink
	border-radius: $radius-s;
	background: $form-input-bg-color;
	color: $form-input-text-color;
	font-size: $control-font-size;
	font-family: inherit;
	min-height: $control-height;
	transition: border-color $animation-fast $animation-ease;
	cursor: pointer;
	display: flex;
	align-items: center;
	justify-content: space-between;
	
	&:focus {
		outline: none;
		border-color: $dropdown-border-color-focused;
		box-shadow: 0 0 0 3px rgba($grey, 0.1);
	}
	
	&::placeholder {
		color: $control-text-color;
		opacity: 1;
	}
	
	img {
		width: 16px;
		height: 16px;
		transition: transform $animation-fast $animation-ease;
	}
	
	&.active img {
		transform: rotate(180deg);
	}
}



.filter-options,
.sort-options {
	position: absolute;
	top: 100%;
	left: 0;
	right: 0;
	background: $form-input-bg-color;
	border: $border solid $dropdown-border-color;
	border-top: none;
	z-index: $dropdown-z-index;
	max-height: $control-max-height;
	overflow-y: auto;
	opacity: 0;
	visibility: hidden;
	transform: translateY(-$space-xs);
	transition: all $animation-fast $animation-ease;
	
	&.show {
		opacity: 1;
		visibility: visible;
		transform: translateY(0);
	}
	
	li {
		list-style: none;
		padding: $space-sm $space-md;
		cursor: pointer;
		color: $control-text-color;
		font-size: $font-size-sm;
		transition: all $animation-fast $animation-ease;
	}
}

// Standard form styling for all pages
.review-form {
	width: 100%;
	max-width: clamp(18.75rem, 15rem + 15vw, 37.5rem); // 300px → 600px
	margin: 0 auto;
	padding: 0 $space-xl;
	background: $pure-white;
	
	.form-title {
		font-size: $font-size-xl;
		font-weight: $font-weight-bold;
		color: $text-color;
		margin-bottom: $space-md;
		text-align: center;
	}
	
	p {
		font-size: $font-size-sm;
		color: $grey-dark;
		margin-bottom: $space-lg;
		text-align: center;
	}
	

	.error-message {
		display: block;
		font-size: $font-size-xs;
		color: $form-input-border-color-error;
		margin-top: $space-xs;
	}
	
	.button-submit {
		width: 100%;
		margin-top: $space-lg;
	}
}

// Mobile responsive adjustments
@media (max-width: $breakpoint-mobile) {
	.filter-dropdown,
	.sort-dropdown {
		margin-bottom: $space-sm;
	}
	
	.filter-options,
	.sort-options {
		max-height: clamp(7.5rem, 6rem + 6vw, 12.5rem); // 120px → 200px
	}
	
	.review-form {
		padding: 0 $space-lg;
	}
}
